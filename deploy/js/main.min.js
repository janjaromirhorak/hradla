var $__src_47_es6_47_structuresAndClasses_46_js__=function(){"use strict";var t=null,e=function(){return $traceurRuntime.createClass(function(){return t||(t=this),this.prefix="id",this.nextId=0,t},{get unique(){for(var t=this.generate();$("#"+t).length;)this.nextId++,t=this.generate();return this.nextId++,t},generate:function(){return this.prefix+this.nextId}},{})}(),n=function(){return $traceurRuntime.createClass(function(t){this.map=new Map,this.default=t},{get size(){return this.map.size},clear:function(){return this.map.clear()},forEach:function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this.map).forEach.apply(t,$traceurRuntime.spread(e))},get:function(t){return this.map.get(t)},delete:function(t){return this.map.delete(t)},set:function(t,e){return this.map.set(t,e)},has:function(t){return this.map.has(t)},entries:function(){return this.map.entries()},keys:function(){return this.map.keys()},values:function(){return this.map.values()}},{})}();return{get Id(){return e},get MapWithDefaultValue(){return n}}}(),$__src_47_es6_47_svgObjects_46_js__=function(){"use strict";var t=$__src_47_es6_47_structuresAndClasses_46_js__,e=function(){return $traceurRuntime.createClass(function(e){this.tagName=e,this.$el=$("<"+this.tagName+">"),this.id=(new t.Id).unique},{addClass:function(t){this.$el.addClass(t)},removeClasses:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=!0,r=!1,s=void 0;try{for(var i=void 0,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;this.$el.removeClass(a)}}catch(t){r=!0,s=t}finally{try{n||null==o.return||o.return()}finally{if(r)throw s}}},addAttr:function(t){this.checkIfElementExistsInDOM(),this.$el.attr(t)},getAttr:function(t){return this.checkIfElementExistsInDOM(),this.$el.attr(t)},removeAttr:function(t){this.checkIfElementExistsInDOM(),this.$el.removeAttr(t)},set id(t){this.addAttr({id:t})},get id(){return this.getAttr("id")},get:function(){return this.checkIfElementExistsInDOM(),this.$el},checkIfElementExistsInDOM:function(){var t=$("#"+this.$el.attr("id"));t.length&&(this.$el=t)}},{})}(),n=function(t){function e(t){$traceurRuntime.superConstructor(e).call(this,t)}return $traceurRuntime.createClass(e,{draggable:function(t){this.addAttr({draggable:t})}},{},t)}(e),r=(function(t){function e(t){$traceurRuntime.superConstructor(e).call(this,t)}$traceurRuntime.createClass(e,{rotatable:function(t){this.addAttr({rotatable:t})}},{},t)}(e),function(t){function e(t){$traceurRuntime.superConstructor(e).call(this,t)}return $traceurRuntime.createClass(e,{rotatable:function(t){this.addAttr({rotatable:t})}},{},t)}(n)),s=function(t){function e(t,n,r,s,i){$traceurRuntime.superConstructor(e).call(this,i),this.addAttr({x:t,y:n,width:r,height:s})}return $traceurRuntime.createClass(e,{},{},t)}(r),i=function(t){function e(t,n,r,s,i,o){$traceurRuntime.superConstructor(e).call(this,t,n,r,s,"rect"),this.addAttr({fill:i,stroke:o,"stroke-width":.5,"pointer-events":"all"})}return $traceurRuntime.createClass(e,{},{},t)}(s),o=function(t){function e(t,n,r,s,i){$traceurRuntime.superConstructor(e).call(this,t,n,r,s,"image"),this.addAttr({"xlink:href":i})}return $traceurRuntime.createClass(e,{changeUrl:function(t){this.addAttr({"xlink:href":t})}},{},t)}(s),a=function(t){function e(){$traceurRuntime.superConstructor(e).call(this,"g")}return $traceurRuntime.createClass(e,{addChild:function(t){return this.$el.append(t.$el),t}},{},t)}(r),c=function(){function t(t,e){this.x=0,this.y=0,void 0!==t&&void 0!==e&&(this.x=t,this.y=e)}return $traceurRuntime.createClass(t,{set:function(t,e){this.x=t,this.y=e},get string(){return this.x+","+this.y}},{parseFromString:function(e){var n=e.split(",");return new t(n[0],n[1])},equals:function(t,e){return t.x===e.x&&t.y===e.y}})}(),u=function(t){function e(t){$traceurRuntime.superConstructor(e).call(this,t)}return $traceurRuntime.createClass(e,{copy:function(){return new e($.extend(!0,[],this.arr))},append:function(t){$traceurRuntime.superGet(this,e.prototype,"append").call(this,t);var n=this.length;return n>=3&&(this.getItem(n-3).x===this.getItem(n-2).x&&this.getItem(n-2).x===this.getItem(n-1).x||this.getItem(n-3).y===this.getItem(n-2).y&&this.getItem(n-2).y===this.getItem(n-1).y)&&this.remove(n-2),this},get string(){for(var t="",e=0;e<this.length;++e)0!==e&&(t+=" "),t+=this.arr[e].string;return t},forEach:function(t){for(var e=0;e<this.arr.length;++e)t(this.arr[e])}},{parseFromString:function(t){for(var n=t.split(" "),r=new e,s=0;s<n.length;++s)r.append(c.parseFromString(n[s]));return r}},t)}(function(){function t(t){this.arr=void 0!==t?t:[]}return $traceurRuntime.createClass(t,{copy:function(){return t($.extend(!0,[],this.arr))},append:function(t){return this.addWithIndex(t,this.arr.length)},prepend:function(t){return this.addWithIndex(t,0)},addWithIndex:function(t,e){for(var n=this.arr.length;n>e;--n)this.arr[n]=this.arr[n-1];return this.arr[e]=t,this},get length(){return this.arr.length},getItem:function(t){return this.arr[t]},get last(){return 0!==this.length&&this.arr[this.length-1]},get first(){return 0!==this.length&&this.arr[0]},remove:function(t){for(var e=this.length,n=t;n<e;++n)this.arr[n]=this.arr[n+1];this.arr.pop()}},{})}()),h=function(t){function e(t,n,r){$traceurRuntime.superConstructor(e).call(this,"polyline"),this.addAttr({points:t.string,stroke:n,fill:"none","stroke-width":r})}return $traceurRuntime.createClass(e,{updatePoints:function(t){this.addAttr({points:t.string})}},{},t)}(e),d=function(t){function e(t,n,r){$traceurRuntime.superConstructor(e).call(this,"pattern"),this.addAttr({id:t,x:0,y:0,width:n,height:r,patternUnits:"userSpaceOnUse",viewBox:"0 0 "+n+" "+r})}return $traceurRuntime.createClass(e,{addChild:function(t){return this.$el.append(t.$el),t}},{},t)}(e);return{get Rectangle(){return i},get SvgImage(){return o},get Group(){return a},get PolylinePoint(){return c},get PolylinePoints(){return u},get PolyLine(){return h},get Pattern(){return d}}}(),$__src_47_es6_47_logic_46_js__=function(){"use strict";var t=function(){function t(){}return $traceurRuntime.createClass(t,{},{and:function(e,n){return t.testLogicRulesSymmetric(e,n,[[t.state.on,t.state.on,t.state.on],[t.state.on,t.state.off,t.state.off],[t.state.on,t.state.unknown,t.state.unknown],[t.state.on,t.state.oscillating,t.state.oscillating],[t.state.off,t.state.off,t.state.off],[t.state.off,t.state.unknown,t.state.off],[t.state.off,t.state.oscillating,t.state.off],[t.state.unknown,t.state.unknown,t.state.unknown],[t.state.unknown,t.state.oscillating,t.state.unknown],[t.state.oscillating,t.state.oscillating,t.state.oscillating]])},nand:function(e,n){return t.not(t.and(e,n))},nor:function(e,n){return t.not(t.or(e,n))},not:function(e){return e===t.state.on?t.state.off:e===t.state.off?t.state.on:e},or:function(e,n){return t.testLogicRulesSymmetric(e,n,[[t.state.on,t.state.on,t.state.on],[t.state.on,t.state.off,t.state.on],[t.state.on,t.state.unknown,t.state.on],[t.state.on,t.state.oscillating,t.state.on],[t.state.off,t.state.off,t.state.off],[t.state.off,t.state.unknown,t.state.unknown],[t.state.off,t.state.oscillating,t.state.oscillating],[t.state.unknown,t.state.unknown,t.state.unknown],[t.state.unknown,t.state.oscillating,t.state.unknown],[t.state.oscillating,t.state.oscillating,t.state.oscillating]])},xnor:function(e,n){return t.not(t.xor(e,n))},xor:function(e,n){return t.testLogicRulesSymmetric(e,n,[[t.state.on,t.state.on,t.state.off],[t.state.on,t.state.off,t.state.on],[t.state.on,t.state.unknown,t.state.unknown],[t.state.on,t.state.oscillating,t.state.oscillating],[t.state.off,t.state.off,t.state.off],[t.state.off,t.state.unknown,t.state.unknown],[t.state.off,t.state.oscillating,t.state.oscillating],[t.state.unknown,t.state.unknown,t.state.unknown],[t.state.unknown,t.state.oscillating,t.state.unknown],[t.state.oscillating,t.state.oscillating,t.state.oscillating]])},get state(){return{unknown:0,on:1,off:2,oscillating:3}},testLogicRulesSymmetric:function(t,e,n){for(var r=0;r<n.length;r++)if(n[r][0]===t&&n[r][1]===e||n[r][0]===e&&n[r][1]===t)return n[r][2]}})}();return{get default(){return t}}}(),$__src_47_es6_47_editorElements_46_js__=function(){"use strict";var t=$__src_47_es6_47_svgObjects_46_js__,e=$__src_47_es6_47_structuresAndClasses_46_js__,n=$__src_47_es6_47_logic_46_js__.default,r={on:"stateOn",off:"stateOff",unknown:"stateUnknown",oscillating:"stateOscillating"},s=function(){return $traceurRuntime.createClass(function(t){void 0!==t&&(this.name=t.replace(/^[ ]*([^(]+).*/,"$1"),this.args=t.replace(/^[^(]+\((.*)\)/,"$1").split(" "))},{setName:function(t){this.name=t},setArguments:function(t){this.args=t},get:function(){return this.name+"("+this.args.join(" ")+")"}},{})}(),i=function(){return $traceurRuntime.createClass(function(t){if(this.items=[],void 0!==t)for(var e=t.split(")"),n=0;n<e.length;n++)e[n]&&this.items.push(new s(e[n]+")"))},{getIndex:function(t){for(var e=0;e<this.items.length;e++)if(t===this.items[e].name)return e;return-1},getTranslate:function(){var t=this.getArguments(this.getIndex("translate"));return{x:t[0],y:t[1]}},getRotate:function(){var t=this.getArguments(this.getIndex("rotate"));return{deg:t[0],centreX:t[1],centreY:t[2]}},setTranslate:function(t,e){this.setParameter("translate",[t,e])},setRotate:function(t,e,n){this.setParameter("rotate",[t,e,n])},rotateRight:function(t,e){if(-1===this.getIndex("rotate"))this.setRotate(90,t,e);else{var n=(parseInt(this.getRotate().deg)+90)%360;if(180===n){var r=t;t=e,e=r}this.setRotate(n,t,e)}},get:function(){for(var t="",e=0;e<this.items.length;e++)0!==e&&(t+=" "),t+=this.items[e].get();return t},getArguments:function(t){return this.items[t].args},setParameter:function(t,e){var n=this.getIndex(t);-1===n&&(n=this.items.length,this.items[n]=new s,this.items[n].setName(t)),this.items[n].setArguments(e)}},{})}(),o=function(){return $traceurRuntime.createClass(function(t){t||console.error("Parent SVG element has not been defined."),this.parentSVG=t,this.svgObj=void 0},{get id(){return this.svgObj.id},onMouseDown:function(){},onMouseUp:function(){},onMouseMove:function(){},get exportData(){console.error("'json' getter has not been defined for this element",this)}},{})}(),a=function(e){function s(e,i,o,a){$traceurRuntime.superConstructor(s).call(this,e),this.gridSize=i,this.connectorSize=i,this.connectorOffset=this.connectorSize/2,this.svgObj=new t.Rectangle(o*this.gridSize-this.connectorOffset,a*this.gridSize-this.connectorOffset,this.connectorSize,this.connectorSize,"none","black"),this.svgObj.$el.addClass("connector"),this.stateAttr=!1,this.isInputConnector=!1,this.stateAttr=n.state.unknown,this.svgObj.addClass(r.unknown),this.wireIds=new Set}return $traceurRuntime.createClass(s,{get isOutputConnector(){return!this.isInputConnector},addWireId:function(t){this.wireIds.add(t)},removeWireId:function(t){this.wireIds.delete(t)},removeWireIdAndUpdate:function(t){this.removeWireId(t)},setState:function(t,e){switch(this.svgObj.removeClasses(r.on,r.off,r.unknown,r.oscillating),t){case n.state.unknown:this.svgObj.addClass(r.unknown);break;case n.state.on:this.svgObj.addClass(r.on);break;case n.state.off:this.svgObj.addClass(r.off);break;case n.state.oscillating:this.svgObj.addClass(r.oscillating)}this.stateAttr=t},get state(){return this.stateAttr},get:function(){return this.svgObj},onMouseUp:function(){this.parentSVG.wireCreationHelper(this.svgObj.id)}},{get type(){return{inputConnector:0,outputConnector:1}}},e)}(o),c=function(t){function e(t,n,r,s){$traceurRuntime.superConstructor(e).call(this,t,n,r,s),this.type=a.type.inputConnector,this.isInputConnector=!0}return $traceurRuntime.createClass(e,{setState:function(t){$traceurRuntime.superGet(this,e.prototype,"setState").call(this,t),this.parentSVG.getBoxByConnectorId(this.svgObj.id).refreshState()},removeWireIdAndUpdate:function(t){$traceurRuntime.superGet(this,e.prototype,"removeWireIdAndUpdate").call(this,t),this.setState(n.state.unknown)},get state(){return $traceurRuntime.superGet(this,e.prototype,"state")}},{},t)}(a),u=function(t){function e(t,n,r,s){$traceurRuntime.superConstructor(e).call(this,t,n,r,s),this.isOutput=!0,this.type=a.type.outputConnector}return $traceurRuntime.createClass(e,{setState:function(t){$traceurRuntime.superGet(this,e.prototype,"setState").call(this,t);var n=!0,r=!1,s=void 0;try{for(var i=void 0,o=this.wireIds[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;this.parentSVG.getWireById(a).setState(t)}}catch(t){r=!0,s=t}finally{try{n||null==o.return||o.return()}finally{if(r)throw s}}},get state(){return $traceurRuntime.superGet(this,e.prototype,"state")}},{},t)}(a),h=function(e){function n(e,r,s,i,o){$traceurRuntime.superConstructor(n).call(this,e),this.name=r,this.category=s,this.gridSize=this.parentSVG.gridSize,this.url="img/"+this.category+"/"+this.name+".svg",this.connectors=[],this.svgObj=new t.Group,this.width=i*this.gridSize,this.height=o*this.gridSize,this.gridWidth=i,this.gridHeight=o;var a=new t.Rectangle(0,0,this.width,this.height,"none","none");a.$el.addClass("rect"),this.svgObj.addChild(a),this.image=new t.SvgImage(0,0,this.width,this.height,this.url),this.svgObj.addChild(this.image),this.svgObj.draggable(!0),this.svgObj.rotatable(!0),this.svgObj.addAttr({type:s}),this.svgObj.$el.addClass("box"),this.svgObj.$el.addClass(s),this.generateBlockNodes()}return $traceurRuntime.createClass(n,{get inputConnectors(){return connectors.filter(function(t){return t.isInputConnector})},get outputConnectors(){return connectors.filter(function(t){return t.isOutputConnector})},get exportData(){var t=[],e=0,n=!0,r=!1,s=void 0;try{for(var i=void 0,o=this.connectors[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value,c=!0,u=!1,h=void 0;try{for(var d=void 0,l=a.wireIds[Symbol.iterator]();!(c=(d=l.next()).done);c=!0){var f=d.value,g=void 0;this.parentSVG.exportWireIdMap.has(f)?g=this.parentSVG.exportWireIdMap.get(f):(this.parentSVG.exportWireIdMap.set(f,this.parentSVG.exportWireId),g=this.parentSVG.exportWireId,this.parentSVG.exportWireId++),t[t.length]={index:e,type:a.type,wireId:g}}}catch(t){u=!0,h=t}finally{try{c||null==l.return||l.return()}finally{if(u)throw h}}e++}}catch(t){r=!0,s=t}finally{try{n||null==o.return||o.return()}finally{if(r)throw s}}return{name:this.name,category:this.category,transform:this.getTransform(),connections:t}},generateBlockNodes:function(){for(var t=void 0!==arguments[0]?arguments[0]:0,e=void 0!==arguments[1]?arguments[1]:0,n=void 0!==arguments[2]?arguments[2]:0,r=void 0!==arguments[3]?arguments[3]:0,s=[],i=4;i<arguments.length;i++)s[i-4]=arguments[i];this.blockedNodes=new Set;for(var o=r;o<=this.gridWidth-e;o++)for(var a=t;a<=this.gridHeight-n;a++)this.blockedNodes.add({x:o,y:a});var c=!0,u=!1,h=void 0;try{for(var d=void 0,l=s[Symbol.iterator]();!(c=(d=l.next()).done);c=!0){var f=d.value;this.blockedNodes.add(f)}}catch(t){u=!0,h=t}finally{try{c||null==l.return||l.return()}finally{if(u)throw h}}},refreshState:function(){console.warn("Calling the virtual function refreshState has no effect.")},changeImage:function(t){t=void 0===t||""===t?"":"-"+t,this.url="img/"+this.category+"/"+this.name+t+".svg",this.image.changeUrl(this.url)},get:function(){return this.svgObj.get()},removeBlockedNode:function(t,e){var n=!0,r=!1,s=void 0;try{for(var i=void 0,o=this.blockedNodes[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(a.x===t&&a.y===e){this.blockedNodes.delete(a);break}}}catch(t){r=!0,s=t}finally{try{n||null==o.return||o.return()}finally{if(r)throw s}}},rotateBlockedNodesRight:function(){var t=this;if(void 0!==this.rotation&&4!==this.rotation||(this.rotation=0),this.rotation++,1===this.rotation||3===this.rotation){var e=new Set;this.blockedNodes.forEach(function(n){e.add({x:Math.abs(n.y-t.gridHeight),y:n.x})}),this.blockedNodes=e}else if(2===this.rotation||4===this.rotation){var n=new Set;this.blockedNodes.forEach(function(e){n.add({x:Math.abs(e.y-t.gridWidth),y:e.x})}),this.blockedNodes=n}},addConnector:function(t,e,n){var r=this.connectors.length;n===a.type.inputConnector?this.connectors[r]=new c(this.parentSVG,this.gridSize,t,e):this.connectors[r]=new u(this.parentSVG,this.gridSize,t,e),this.svgObj.addChild(this.connectors[r].get()),this.removeBlockedNode(t,e)},getConnectorById:function(t){for(var e=0;e<this.connectors.length;e++)if(this.connectors[e].id===t)return this.connectors[e]},getTransform:function(){var t;return this.svgObj.$el.attr("transform")?t=new i(this.svgObj.$el.attr("transform")):((t=new i).setTranslate(0,0),this.svgObj.addAttr({transform:t.get()})),t},setTransform:function(t){this.svgObj.addAttr({transform:t.get()})},onMouseDown:function(t){this.mouseLeft=!1,1===t.which&&(this.mouseLeft=!0,this.onMouseDownLeft(t),this.parentSVG.moveToFrontById(this.svgObj.id))},onMouseDownLeft:function(t){this.mouseMoved=!1;var e=this.getTransform().getTranslate();this.offset={x:t.pageX-e.x,y:t.pageY-e.y}},onMouseMove:function(t){if(this.mouseLeft){this.mouseMoved=!0;var e=t.pageX-this.offset.x,n=t.pageY-this.offset.y,r=this.getTransform();r.setTranslate(e,n),this.setTransform(r),this.updateWires(!0)}},onMouseUp:function(t){1===t.which?this.mouseMoved?this.onDrop(t):this.onClick():2===t.which&&this.onClickMiddle()},onDrop:function(t){var e=t.pageX-this.offset.x,n=t.pageY-this.offset.y;e=this.parentSVG.snapToGrid(e),n=this.parentSVG.snapToGrid(n);var r=this.getTransform();r.setTranslate(e,n),this.setTransform(r),this.updateWires()},onClick:function(){},onClickMiddle:function(){var t=this.getTransform(),e=this.svgObj.$el[0].getBoundingClientRect(),n=Math.round(e.width/2),r=Math.round(e.height/2);n-=n%this.gridSize,r-=r%this.gridSize,t.rotateRight(n,r),this.svgObj.addAttr({transform:t.get()}),this.rotateBlockedNodesRight(),this.updateWires()},updateWires:function(){var t=void 0!==arguments[0]&&arguments[0],e=this;this.connectors.forEach(function(n){n.wireIds.forEach(function(n){var r=e.parentSVG.getWireById(n);t?r.temporaryWire():r.routeWire()})})}},{get triggersSimulationOnRefresh(){return!1}},e)}(o),d=function(t){function e(t){var n=void 0!==arguments[1]&&arguments[1];$traceurRuntime.superConstructor(e).call(this,t,"input","io",7,4),this.addConnector(7,2,a.type.outputConnector),this.on=n}return $traceurRuntime.createClass(e,{get exportData(){var t=$traceurRuntime.superGet(this,e.prototype,"exportData");return t.isOn=this.isOn,t},generateBlockNodes:function(){$traceurRuntime.superGet(this,e.prototype,"generateBlockNodes").call(this,0,1,1,0)},refreshState:function(){this.parentSVG.startNewSimulation(this.connectors[0],this.connectors[0].state)},set on(t){t?(this.changeImage("on"),this.connectors[0].setState(n.state.on),this.refreshState()):(this.changeImage(),this.connectors[0].setState(n.state.off),this.refreshState()),this.isOn=t},get on(){return this.isOn},onClick:function(){this.on=!this.on}},{get triggersSimulationOnRefresh(){return!0}},t)}(h),l=function(t){function e(t){$traceurRuntime.superConstructor(e).call(this,t,"output","io",5,4),this.addConnector(0,2,a.type.inputConnector)}return $traceurRuntime.createClass(e,{refreshState:function(){this.setState(this.connectors[0].state)},setState:function(t){switch(t){case n.state.on:this.changeImage("on");break;case n.state.off:this.changeImage("off");break;case n.state.unknown:this.changeImage();break;case n.state.oscillating:this.changeImage("osc")}},generateBlockNodes:function(){$traceurRuntime.superGet(this,e.prototype,"generateBlockNodes").call(this,0,0,0,1)}},{},t)}(h),f=function(t){function e(t,n){$traceurRuntime.superConstructor(e).call(this,t,n,"gate",9,4),this.addConnector(9,2,a.type.outputConnector),"not"===this.name?this.addConnector(0,2,a.type.inputConnector):(this.addConnector(0,1,a.type.inputConnector),this.addConnector(0,3,a.type.inputConnector),this.generateBlockNodes({x:0,y:2})),this.refreshState()}return $traceurRuntime.createClass(e,{generateBlockNodes:function(t){void 0!==t?$traceurRuntime.superGet(this,e.prototype,"generateBlockNodes").call(this,0,1,0,1,t):$traceurRuntime.superGet(this,e.prototype,"generateBlockNodes").call(this,0,1,0,1)},refreshState:function(){var t=n.state.unknown;switch(this.name){case"and":t=n.and(this.connectors[1].state,this.connectors[2].state);break;case"nand":t=n.nand(this.connectors[1].state,this.connectors[2].state);break;case"nor":t=n.nor(this.connectors[1].state,this.connectors[2].state);break;case"not":t=n.not(this.connectors[1].state);break;case"or":t=n.or(this.connectors[1].state,this.connectors[2].state);break;case"xnor":t=n.xnor(this.connectors[1].state,this.connectors[2].state);break;case"xor":t=n.xor(this.connectors[1].state,this.connectors[2].state)}this.parentSVG.simulator.notifyChange(this.connectors[0].id,t)}},{},t)}(h),g=function(s){function i(t,e,r,s){var o=void 0===arguments[4]||arguments[4];$traceurRuntime.superConstructor(i).call(this,t),this.gridSize=s,this.fromId=e,this.toId=r,this.startBox=this.parentSVG.getBoxByConnectorId(e),this.endBox=this.parentSVG.getBoxByConnectorId(r),this.boxes=[this.startBox,this.endBox],this.startConnector=this.parentSVG.getConnectorById(e),this.endConnector=this.parentSVG.getConnectorById(r),this.connectors=[this.startConnector,this.endConnector],this.routeWire(!0,o),this.stateAttr=n.state.unknown;var a=!0,c=!1,u=void 0;try{for(var h=void 0,d=this.connectors[Symbol.iterator]();!(a=(h=d.next()).done);a=!0){var l=h.value;l.isOutput&&this.setState(l.state)}}catch(t){c=!0,u=t}finally{try{a||null==d.return||d.return()}finally{if(c)throw u}}this.svgObj.$el.addClass("wire")}return $traceurRuntime.createClass(i,{get exportData(){return{fromId:this.fromId,toId:this.toId}},setState:function(t){switch(this.svgObj.removeClasses(r.on,r.off,r.unknown,r.oscillating),t){case n.state.unknown:this.svgObj.addClass(r.unknown);break;case n.state.on:this.svgObj.addClass(r.on);break;case n.state.off:this.svgObj.addClass(r.off);break;case n.state.oscillating:this.svgObj.addClass(r.oscillating)}this.startConnector.isInputConnector&&this.startConnector.setState(t),this.endConnector.isInputConnector&&this.endConnector.setState(t),this.stateAttr=t},get state(){return this.stateAttr},updateWireState:function(){var t=!0,e=!1,n=void 0;try{for(var r=void 0,s=this.boxes[Symbol.iterator]();!(t=(r=s.next()).done);t=!0)r.value.refreshState()}catch(t){e=!0,n=t}finally{try{t||null==s.return||s.return()}finally{if(e)throw n}}},get:function(){return this.svgObj.get()},getTemporaryWirePoints:function(){var e=new t.PolylinePoints;return e.append(new t.PolylinePoint(this.wireStart.x,this.wireStart.y)),e.append(new t.PolylinePoint(this.wireEnd.x,this.wireEnd.y)),e},temporaryWire:function(){this.wireStart=this.getCoordinates(this.startConnector,!1),this.wireEnd=this.getCoordinates(this.endConnector,!1),this.setWirePath(this.getTemporaryWirePoints())},routeWire:function(){var t=void 0===arguments[0]||arguments[0],e=void 0===arguments[1]||arguments[1];this.wireStart=this.getCoordinates(this.startConnector,t),this.wireEnd=this.getCoordinates(this.endConnector,t),this.points=this.aStar({x:this.wireStart.x/this.gridSize,y:this.wireStart.y/this.gridSize},{x:this.wireEnd.x/this.gridSize,y:this.wireEnd.y/this.gridSize}),this.setWirePath(this.points),e&&this.updateWireState()},setWirePath:function(e){void 0!==this.svgObj?this.svgObj.updatePoints(e):this.svgObj=new t.PolyLine(e,"#8b8b8b",2),this.svgObj.removeClasses(r.on,r.off,r.unknown,r.oscillating),this.svgObj.addClass(r.unknown),this.svgObj.addAttr({fromId:this.fromId,toId:this.toId})},aStar:function(n,r){var s=new Set,o=new Set;o.add(n);var a=new Map,c=new e.MapWithDefaultValue(1/0);c.set(n,0);var u=new e.MapWithDefaultValue(1/0);u.set(n,i.manhattanDistance(n,r));var h,d=this.parentSVG.getNonRoutableNodes();for(h=void 0===this.svgObj?this.parentSVG.getInconvenientNodes():this.parentSVG.getInconvenientNodes(this.svgObj.id);o.size>0;){var l=void 0,f=void 0,g=!0,p=!1,v=void 0;try{for(var m=void 0,y=o[Symbol.iterator]();!(g=(m=y.next()).done);g=!0){var w=m.value;(!l||u.get(w)<f)&&(l=w,f=u.get(l))}}catch(t){p=!0,v=t}finally{try{g||null==y.return||y.return()}finally{if(p)throw v}}if(t.PolylinePoint.equals(l,r))return this.reconstructPath(a,l);o.delete(l),s.add(l);for(var x=0;x<4;x++)for(var C=i.movePoint(l,x),_=0;_<50&&!i.setHasThisPoint(d,this.scalePointToGrid(C));_++)if(!s.has(C)){o.has(C).y||o.add(C);var b=1;0!==_&&(b=2);var $=c.get(l)+b;if(i.setHasThisPoint(h,this.scalePointToGrid(C))&&($+=1),!($>=c.get(C))){if(a.set(C,l),c.set(C,$),u.set(C,$+i.manhattanDistance(C,r)),i.setHasThisPoint(h,this.scalePointToGrid(C)))break;C=i.movePoint(C,x)}}if(o.size>5e4)break}return this.getTemporaryWirePoints()},scalePointToGrid:function(t){return{x:t.x*this.gridSize,y:t.y*this.gridSize}},reconstructPath:function(e,n){var r=new t.PolylinePoints;for(r.append(new t.PolylinePoint(n.x*this.gridSize,n.y*this.gridSize));e.has(n);)n=e.get(n),r.append(new t.PolylinePoint(n.x*this.gridSize,n.y*this.gridSize));return r},getCoordinates:function(t){var e=void 0===arguments[1]||arguments[1],n=(t.svgObj.id,t.svgObj.$el),r=n.position(),s=n.attr("width"),i=n.attr("height"),o=r.left+s/2,a=r.top+i/2;return e&&(o=this.parentSVG.snapToGrid(o),a=this.parentSVG.snapToGrid(a)),{x:o,y:a}}},{movePoint:function(t,e){switch(e){case 0:return{x:t.x,y:t.y-1};case 1:return{x:t.x+1,y:t.y};case 2:return{x:t.x,y:t.y+1};case 3:return{x:t.x-1,y:t.y}}},manhattanDistance:function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},setHasThisPoint:function(t,e){var n=!0,r=!1,s=void 0;try{for(var i=void 0,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(a.x===e.x&&a.y===e.y)return!0}}catch(t){r=!0,s=t}finally{try{n||null==o.return||o.return()}finally{if(r)throw s}}return!1}},s)}(o);return{get Transform(){return i},get InputConnector(){return c},get OutputConnector(){return u},get InputBox(){return d},get OutputBox(){return l},get Gate(){return f},get Wire(){return g}}}(),$__src_47_es6_47_contextMenu_46_js__=function(){"use strict";var t=function(){return $traceurRuntime.createClass(function(t,e,n,r,s){this.name=t,this.type=e,this.contextMenu=n,this.parentSVG=r,this.$el=$("<li>"),$(this.$el).text(t).attr("type",e),s&&$(this.$el).click(function(t){s(t),n.hide()})},{addClass:function(t){return this.$el.addClass(t),this},appendItem:function(t){return this.subList||(this.subList=$("<ul>"),this.$el.append(this.subList)),this.subList.append(t.jQuery),t},get jQuery(){return this.$el}},{})}(),e=function(t){function e(t,n,r){$traceurRuntime.superConstructor(e).call(this,t,t,n,r,function(e){var s={left:Math.round(n.position.x/r.gridSize)*r.gridSize,top:Math.round(n.position.y/r.gridSize)*r.gridSize};r.newGate(t,s.left,s.top)})}return $traceurRuntime.createClass(e,{},{},t)}(t),n=function(){return $traceurRuntime.createClass(function(n){var r=this;this.parentSVG=n;var s=["not","and","or","nand","nor","xor","xnor"];this.position={x:0,y:0},this.$el=$("<ul>"),this.$el.attr("id","contextMenu");for(var i=new t("New gate","",this,n),o=0;o<s.length;++o)i.appendItem(new e(s[o],this,n));this.appendItem(i),this.appendItem(new t("Input box","",this,n,function(){var t={left:r.parentSVG.snapToGrid(r.position.x),top:r.parentSVG.snapToGrid(r.position.y)};n.newInput(t.left,t.top)})),this.appendItem(new t("Output box","",this,n,function(){var t={left:r.parentSVG.snapToGrid(r.position.x),top:r.parentSVG.snapToGrid(r.position.y)};n.newOutput(t.left,t.top)})),this.appendConditionalItem("box","Remove this item",function(t){r.parentSVG.removeBox(t)}),this.appendConditionalItem("wire","Remove this wire",function(t){r.parentSVG.removeWireById(t)}),n.$svg.before(this.$el)},{appendItem:function(t){return this.$el.append(t.jQuery),t},appendConditionalItem:function(t,e,n){this.conditionalItems||(this.conditionalItems=[]),this.conditionalItems[this.conditionalItems.length]={itemClass:t,text:e,clickFunction:n}},resolveConditionalItems:function(e){for(var n=this,r=this,s=0;s<this.conditionalItems.length;++s)!function(s){e.hasClass(r.conditionalItems[s].itemClass)&&r.appendItem(new t(r.conditionalItems[s].text,"",r,r.parentSVG,function(){n.conditionalItems[s].clickFunction(e.attr("id"))})).addClass("conditional")}(s)},hideAllConditionalItems:function(){this.$el.children(".conditional").remove()},display:function(t,e,n){this.position={x:t,y:e},this.$el.css({display:"block",top:e+"px",left:t+"px"}),this.resolveConditionalItems(n)},hide:function(){this.$el.css({display:"none"}),this.hideAllConditionalItems()}},{})}();return{get default(){return n}}}(),$__src_47_es6_47_importExport_46_js__=function(){"use strict";var t=function(){function t(t){this.parentSVG=t}return $traceurRuntime.createClass(t,{get exportData(){return this.parentSVG.exportData},json:function(){var e=void 0!==arguments[0]?arguments[0]:t.style.compact;if(void 0!==arguments[1]&&arguments[1])return"data:application/json;charset=utf-8,"+encodeURIComponent(this.json(e));switch(e){case t.style.compact:return JSON.stringify(this.exportData);case t.style.pretty:return JSON.stringify(this.exportData,null,2)}}},{get style(){return{pretty:0,compact:1}}})}(),e=function(){return $traceurRuntime.createClass(function(t,e){t.importData(JSON.parse(e))},{},{})}();return{get exportNetwork(){return t},get importNetwok(){return e}}}(),$__src_47_es6_47_floatingMenu_46_js__=function(){"use strict";var t=$__src_47_es6_47_importExport_46_js__,e=t.exportNetwork,n=t.importNetwok,r=function(){return $traceurRuntime.createClass(function(t){this.$el=t?$("<"+t+">"):$("<div>")},{},{})}(),s=function(t){function e(t){$traceurRuntime.superConstructor(e).call(this),this.$el.addClass("helpWindowItem"),this.$el.html(t)}return $traceurRuntime.createClass(e,{},{},t)}(r),i=function(t){function e(){$traceurRuntime.superConstructor(e).call(this),this.$el.attr("id","help"),this.append(new s("<strong>main menu</strong>: right click")),this.append(new s("drag and drop to <strong>move elements</strong>")),this.append(new s("<strong>middle click</strong> to rotate elements")),this.append(new s("<strong>click <img src='img/gui/help.svg' class='helpicon' alt='help icon'></strong> to display documentation (in czech)"))}return $traceurRuntime.createClass(e,{append:function(t){this.$el.append(t.$el)}},{},t)}(r),o=function(t){function e(t,n,r,s){$traceurRuntime.superConstructor(e).call(this,s),this.$el.addClass("button"),this.$el.addClass(t),this.$el.append($("<img>").attr("src","img/gui/"+n+".svg").attr("alt",r).attr("title",r))}return $traceurRuntime.createClass(e,{},{},t)}(r),a=function(t){function r(t){$traceurRuntime.superConstructor(r).call(this);this.$el.attr("id","floatingMenu");var s,a=new o("import","import","Import a network","a");a.$el.on("click",function(){var e=$("<div>").addClass("importExport").addClass("import");e.append($("<textarea></textarea>").attr("id","importJSON")).append($("<a>").attr({href:"#",class:"upload"}).append($("<img>").attr("src","img/gui/import.svg")).append(" import from JSON").on("click",function(){var e=$("#importJSON").val();s.close(),new n(t,e)})),s=lity(e)}),this.append(a);var c=new o("export","export","Export this network","a");c.$el.on("click",function(){var n=new e(t),r=$("<div>").addClass("importExport").addClass("export");r.append($("<pre>").append($("<code>").text(n.json(e.style.pretty)))),r.append($("<a>").attr({href:n.json(e.style.pretty,!0),class:"download",download:"network.json"}).append($("<img>").attr("src","img/gui/export.svg")).append(" expanded JSON")),r.append($("<a>").attr({href:n.json(e.style.compact,!0),class:"download",download:"network.min.json"}).append($("<img>").attr("src","img/gui/export.svg")).append(" compact JSON")),lity(r)}),this.append(c);var u=new o("help","help","Display help","a");u.$el.on("mouseover",function(){$("#help").addClass("visible")}).on("mouseout",function(){$("#help").removeClass("visible")}),u.$el.attr({href:"./docs/","data-lity":""}),this.append(u),t.$svg.after(this.$el),t.$svg.after((new i).$el)}return $traceurRuntime.createClass(r,{append:function(t){this.$el.append(t.$el)}},{},t)}(r);return{get default(){return a}}}(),$__src_47_es6_47_logicSimulator_46_js__=function(){"use strict";var t=$__src_47_es6_47_logic_46_js__.default,e=function(){return $traceurRuntime.createClass(function(t,e,n){this.connectorId=t,this.state=e,this.whoCausedIt=n},{},{})}(),n=function(){return $traceurRuntime.createClass(function(t){this.parentSVG=t,this.predecessors=new Map,this.waves=new Map,this.wave=0,this.cycledConnectors=new Map,this.resolvedCycledConnectors=new Set,this.enabled=!0},{enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},run:function(){if(this.enabled)for(console.log("Simulator.run() has been successfully started."),this.wave++;this.waves.has(this.wave);)this.step(),this.waves.delete(this.wave),this.wave++},step:function(){var e=!0,n=!1,r=void 0;try{for(var s=void 0,i=this.waves.get(this.wave)[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){var o=s.value,a=o.connectorId,c=o.state,u=o.whoCausedIt;if(!this.resolvedCycledConnectors.has(a)){if(this.cycledConnectors.has(a)){console.log("this happened");var h=this.cycledConnectors.get(a);h.has(c)?(console.log("state reappeared"),h.size>1&&(c=t.state.oscillating),this.resolvedCycledConnectors.add(a)):h.add(c),this.cycledConnectors.set(a,h),console.log(this.cycledConnectors.get(a))}this.whoCausedIt=a,u&&this.addPredecessor(a,u),!this.cycledConnectors.has(a)&&this.getAllPredecessors(a).has(a)&&this.cycledConnectors.set(a,new Set([c]));var d=this.parentSVG.getConnectorById(a);d&&d.setState(c)}}}catch(t){n=!0,r=t}finally{try{e||null==i.return||i.return()}finally{if(n)throw r}}this.whoCausedIt=void 0},addPredecessor:function(t,e){this.predecessors.has(t)||this.predecessors.set(t,new Set),this.predecessors.get(t).add(e)},getAllPredecessors:function(t){this.predecessors.has(t)||this.predecessors.set(t,new Set);var e=new Set;this.predecessors.get(t).forEach(e.add,e);for(var n=0,r=e.size;n<r;){var s=!0,i=!1,o=void 0;try{for(var a=void 0,c=e[Symbol.iterator]();!(s=(a=c.next()).done);s=!0){var u=a.value;this.predecessors.has(u)&&this.predecessors.get(u).forEach(e.add,e)}}catch(t){i=!0,o=t}finally{try{s||null==c.return||c.return()}finally{if(i)throw o}}n=r,r=e.size}return e},notifyChange:function(t,n){var r=this.wave+1;this.waves.has(r)||this.waves.set(r,[]),this.waves.get(r).push(new e(t,n,this.whoCausedIt))}},{})}();return{get default(){return n}}}(),$__src_47_es6_47_canvas_46_js__=function(){"use strict";var t=$__src_47_es6_47_svgObjects_46_js__,e=$__src_47_es6_47_editorElements_46_js__,n=$__src_47_es6_47_logic_46_js__.default,r=$__src_47_es6_47_contextMenu_46_js__.default,s=$__src_47_es6_47_floatingMenu_46_js__.default,i=$__src_47_es6_47_logicSimulator_46_js__.default,o=function(){return $traceurRuntime.createClass(function(e,n){var o=this;this.$svg=$(e),this.gridSize=n,this.boxes=[],this.wires=[],this.simulator=new i(this),this.$defs=$("<defs>"),this.$svg.prepend(this.$defs);var a=new t.Pattern("grid",this.gridSize,this.gridSize),c=(new t.PolylinePoints).append(new t.PolylinePoint(0,0)).append(new t.PolylinePoint(this.gridSize,0)).append(new t.PolylinePoint(this.gridSize,this.gridSize));a.addChild(new t.PolyLine(c,"#a3a4d2",2)),this.addPattern(a.get()),this.background=new t.Rectangle(0,0,"100%","100%","url(#grid)","none"),this.appendJQueryObject(this.background.get()),this.refresh(),this.contextMenu=new r(this),this.floatingMenu=new s(this);var u;this.$svg.on("mousedown",function(t){void 0!==(u=o.getRealTarget(t.target))&&u.onMouseDown(t),o.hideContextMenu(),t.preventDefault()}).on("mousemove",function(t){void 0!==u&&u.onMouseMove(t),t.preventDefault()}).on("mouseup",function(t){void 0!==u&&u.onMouseUp(t),u=void 0,t.preventDefault()}).on("contextmenu",function(t){o.displayContextMenu(t.pageX,t.pageY,o.getRealJQueryTarget(t.target)),t.preventDefault()})},{get exportData(){this.exportWireIdMap=new Map,this.exportWireId=0;for(var t={boxes:[]},e=0;e<this.boxes.length;++e)t.boxes[e]=this.boxes[e].exportData;return t},importData:function(t){var n=this;this.simulator.disable();for(var r=new Map,s=0;s<t.boxes.length;++s){var o=void 0;switch(t.boxes[s].category){case"gate":o=this.newGate(t.boxes[s].name,0,0,!1);break;case"io":switch(t.boxes[s].name){case"input":o=this.newInput(0,0,t.boxes[s].isOn,!1);break;case"output":o=this.newOutput(0,0,!1);break;default:console.error("Unknown io box name '"+t.boxes[s].name+"'.")}break;default:console.error("Unknown box category '"+t.boxes[s].category+"'.")}if(o){for(var a=new e.Transform,c=0;c<t.boxes[s].transform.items.length;++c)switch(t.boxes[s].transform.items[c].name){case"translate":a.setTranslate(t.boxes[s].transform.items[c].args[0],t.boxes[s].transform.items[c].args[1]);break;case"rotate":a.setRotate(t.boxes[s].transform.items[c].args[0],t.boxes[s].transform.items[c].args[1],t.boxes[s].transform.items[c].args[2]);break;default:console.error("Unknown transform property '"+t.boxes[s].transform.items[c].name+"'.")}o.setTransform(a);for(var u=0;u<t.boxes[s].connections.length;++u){var h=t.boxes[s].connections[u].wireId,d={index:t.boxes[s].connections[u].index,type:t.boxes[s].connections[u].type,boxId:o.id};if(r.has(h)){var l=r.get(h);l[l.length]=d,r.set(h,l)}else r.set(h,[d])}}}this.refresh(),r.forEach(function(t){var e=[];if(t[0]&&t[1])for(var r=0;r<=1;++r){var s=n.getBoxById(t[r].boxId);e[r]=s.connectors[t[r].index].id}n.newWire(e[0],e[1],!1)}),this.refresh(),this.simulator=new i,this.simulator.disable();for(var f in this.boxes)if(f.triggersSimulationOnRefresh){var g=!0,p=!1,v=void 0;try{for(var m=void 0,y=f.outputConnectors[Symbol.iterator]();!(g=(m=y.next()).done);g=!0){var w=m.value;this.simulator.notifyChange(w.id,w.state)}}catch(t){p=!0,v=t}finally{try{g||null==y.return||y.return()}finally{if(p)throw v}}}this.simulator.enable(),this.simulator.run()},wireCreationHelper:function(t){this.firstConnectorId?(this.newWire(this.firstConnectorId,t),this.firstConnectorId=void 0):this.firstConnectorId=t},startNewSimulation:function(t,e){this.simulator=new i(this),this.simulator.notifyChange(t.id,e),this.simulator.run()},newGate:function(t,n,r){var s=void 0===arguments[3]||arguments[3];return this.newBox(n,r,new e.Gate(this,t,n,r),s)},newInput:function(t,n){var r=void 0!==arguments[2]&&arguments[2],s=void 0===arguments[3]||arguments[3];return this.newBox(t,n,new e.InputBox(this,r),s)},newOutput:function(t,n){var r=void 0===arguments[2]||arguments[2];return this.newBox(t,n,new e.OutputBox(this),r)},newBox:function(t,n,r){var s=void 0===arguments[3]||arguments[3],i=this.boxes.length;if(this.boxes[i]=r,t&&n){var o=new e.Transform;o.setTranslate(t,n),this.boxes[i].svgObj.addAttr({transform:o.get()})}return this.appendElement(this.boxes[i],s),this.boxes[i]},removeBox:function(t){for(var e=$("#"+t),n=-1,r=0;r<this.boxes.length;r++)if(this.boxes[r].svgObj.id===t){n=r;break}if(n>-1){for(var s=0;s<this.boxes[n].connectors.length;s++)this.removeWiresByConnectorId(this.boxes[n].connectors[s].svgObj.id);this.boxes.splice(n,1),e.remove()}else console.error("Trying to remove an nonexisting gate. (Gate id: "+t+")")},newWire:function(t,n){var r=void 0===arguments[2]||arguments[2],s=this;if(t===n)return!1;var i=[this.getConnectorById(t),this.getConnectorById(n)];i.forEach(function(t){t.isInputConnector&&s.removeWiresByConnectorId(t.id)});var o=this.wires.length;return this.wires[o]=new e.Wire(this,t,n,this.gridSize,r),i.forEach(function(t){t.addWireId(s.wires[o].svgObj.id)}),this.appendElement(this.wires[o],r),this.moveToBackById(this.wires[o].svgObj.id),r&&this.wires[o].updateWireState(),this.wires[o]},getWireById:function(t){for(var e=this.wires.length,n=0;n<e;n++)if(this.wires[n].svgObj.id===t)return this.wires[n];return!1},getWiresByConnectorId:function(t){return this.getConnectorById(t).wireIds},removeWireById:function(t){for(var e=0;e<this.wires.length;++e)if(this.wires[e].svgObj.id===t){var n=this.wires[e].startConnector,r=this.wires[e].endConnector;n.removeWireIdAndUpdate(t),r.removeWireIdAndUpdate(t),this.wires[e].svgObj.$el.remove(),this.wires.splice(e,1);break}},removeWiresByConnectorId:function(t){var e=this,r=this.getConnectorById(t);r.wireIds.forEach(function(r){var s=e.getWireById(r),i=e.getConnectorById(s.fromId,s);i.svgObj.id===t&&(i=e.getConnectorById(s.toId,s)),i.wireIds.delete(r),$("#"+r).remove(),i.isInputConnector&&i.setState(n.state.unknown)}),r.wireIds.clear(),r.isInputConnector&&r.setState(n.state.unknown)},getBoxById:function(t){for(var e=0;e<this.boxes.length;e++)if(this.boxes[e].svgObj.id===t)return this.boxes[e];return!1},getBoxByConnectorId:function(t){for(var e=0;e<this.boxes.length;e++)if(void 0!==this.boxes[e].getConnectorById(t))return this.boxes[e];return!1},getConnectorById:function(t,e){if(void 0!==e){var n=e.startBox.getConnectorById(t);return n||(n=e.endBox.getConnectorById(t)),n}for(var r=this.boxes.length,s=0;s<r;s++){var i=this.boxes[s].getConnectorById(t);if(i)return i}},getRealJQueryTarget:function(t){var e=$(t);if(!e.hasClass("connector")&&e.parents("g").length>0)for(e=e.parent();"G"!==e.prop("tagName")&&"g"!==e.prop("tagName");)e=e.parent();return e},getRealTarget:function(t){var e=$(t);if(e.hasClass("connector"))return this.getConnectorById(e.attr("id"));if(e.parents("g").length>0){for(var n=e.parent();"G"!==n.prop("tagName")&&"g"!==n.prop("tagName");)n=n.parent();return this.getBoxById(n.attr("id"))}return e.hasClass("wire")?this.getWireById(e.attr("id")):void 0},appendElement:function(t){var e=void 0===arguments[1]||arguments[1];this.appendJQueryObject(t.get(),e)},appendJQueryObject:function(t){var e=void 0===arguments[1]||arguments[1];this.$svg.append(t),e&&this.refresh()},addPattern:function(t){this.$defs.append(t),this.refresh()},refresh:function(){this.$svg.html(this.$svg.html()),console.log("SVG document has been reloaded.")},displayContextMenu:function(t,e,n){this.contextMenu.display(t,e,n)},hideContextMenu:function(){this.contextMenu.hide()},snapToGrid:function(t){return Math.round(t/this.gridSize)*this.gridSize},getNonRoutableNodes:function(){for(var t=new Set,e=0;e<this.boxes.length;++e){var n=$("#"+this.boxes[e].svgObj.id).children(".rect")[0],r=$(n).position();r.left=this.snapToGrid(r.left),r.top=this.snapToGrid(r.top);var s=!0,i=!1,o=void 0;try{for(var a=void 0,c=this.boxes[e].blockedNodes[Symbol.iterator]();!(s=(a=c.next()).done);s=!0){var u=a.value,h=r.left+u.x*this.gridSize,d=r.top+u.y*this.gridSize;t.add({x:h,y:d})}}catch(t){i=!0,o=t}finally{try{s||null==c.return||c.return()}finally{if(i)throw o}}}return t},moveToFrontById:function(t){this.$svg.append($("#"+t))},moveToBackById:function(t){$("#"+this.background.id).after($("#"+t))},getInconvenientNodes:function(t){for(var e=this,n=new Set,r=this,s=0;s<this.wires.length;++s)!function(s){if(void 0===t||t!==r.wires[s].svgObj.id){var i;r.wires[s].points.forEach(function(t){if(void 0===i)n.add({x:t.x,y:t.y});else if(i.x===t.x)for(var r=Math.min(i.y,t.y),s=Math.max(i.y,t.y);r<=s;)n.add({x:t.x,y:r}),r+=e.gridSize;else if(i.y===t.y)for(var o=Math.min(i.x,t.x),a=Math.max(i.x,t.x);o<=a;)n.add({x:o,y:t.y}),o+=e.gridSize;else console.error("getInconvenientNodes: line between two points is neither horizontal nor vertical");i={x:t.x,y:t.y}})}}(s);return n}},{snapToGrid:function(t,e){return Math.round(t/e)*e}})}();return{get default(){return o}}}(),$__src_47_es6_47_main_46_js__=function(){"use strict";var t=$__src_47_es6_47_canvas_46_js__.default;return $(function(){new t("svg#canvas",10)}),{}}();